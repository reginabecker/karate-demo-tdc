[{"line":1,"elements":[{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url demoBaseUrl","result":{"duration":18494,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":4}]},{"line":6,"name":"upload file","description":"","id":"upload-file","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'files'","result":{"duration":146092,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":7},{"name":"multipart field myFile = read('test.pdf')","result":{"duration":13552106,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":9},{"name":"multipart field message = 'hello world'","result":{"duration":37003119,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":10},{"name":"method post","result":{"duration":12454119,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":11,"doc_string":{"content_type":"","value":"11:05:00.654 request:\n1 > POST http:\/\/127.0.0.1:51918\/files\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 6927\n1 > Content-Type: multipart\/form-data; boundary=bjByMpXxmkkrT7BHmvaSlHPUt5gUH68p_hnaqh1\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:00.663 response time in milliseconds: 7.91\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Transfer-Encoding: chunked\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{\"id\":\"b0797aec-e643-4842-aa97-cf887ab09a74\",\"filename\":\"myFile\",\"message\":\"hello world\",\"contentType\":\"application\/octet-stream\"}","line":11}},{"name":"status 200","result":{"duration":4047,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":12},{"name":"match response == { id: '#uuid', filename: 'myFile', message: 'hello world', contentType: 'application\/octet-stream' }","result":{"duration":259171,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":13},{"name":"def id = response.id","result":{"duration":1172694,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":14},{"name":"path 'files', id","result":{"duration":4811706,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":16},{"name":"method get","result":{"duration":11616630,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":17,"doc_string":{"content_type":"","value":"11:05:00.672 request:\n2 > GET http:\/\/127.0.0.1:51918\/files\/b0797aec-e643-4842-aa97-cf887ab09a74\n2 > Accept-Encoding: gzip,deflate\n2 > Connection: Keep-Alive\n2 > Host: 127.0.0.1:51918\n2 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:00.681 response time in milliseconds: 8.22\n2 < 200\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Content-Disposition: attachment; filename=\"myFile\"\n2 < Content-Length: 6514\n2 < Content-Type: application\/octet-stream\n2 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n2 < Expires: 0\n2 < Pragma: no-cache\n2 < X-Content-Type-Options: nosniff\n2 < X-Frame-Options: DENY\n2 < X-XSS-Protection: 1; mode=block","line":17}},{"name":"status 200","result":{"duration":4469,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":18},{"name":"match response == read('test.pdf')","result":{"duration":761144,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":19},{"name":"match header Content-Disposition contains 'attachment'","result":{"duration":251295,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":20},{"name":"match header Content-Disposition contains 'myFile'","result":{"duration":2586725,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":21},{"name":"match header Content-Type == 'application\/octet-stream'","result":{"duration":2286125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":22},{"name":"def FileChecker = Java.type('com.intuit.karate.demo.util.FileChecker')","result":{"duration":9346287,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":25},{"name":"json fileInfo = FileChecker.getMetadata(id)","result":{"duration":4343694,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":27},{"name":"match fileInfo == { id: '#(id)', filename: 'myFile', message: 'hello world', contentType: 'application\/octet-stream' }","result":{"duration":3456061,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":28}]},{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url demoBaseUrl","result":{"duration":6685,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":4}]},{"line":31,"name":"upload with filename and content-type specified","description":"","id":"upload-with-filename-and-content-type-specified","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'files'","result":{"duration":80513,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":32},{"name":"multipart file myFile = { read: 'test.pdf', filename: 'upload-name.pdf', contentType: 'application\/pdf' }","result":{"duration":325543,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":33},{"name":"multipart field message = 'hello world'","result":{"duration":28246359,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":34},{"name":"method post","result":{"duration":12827431,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":35,"doc_string":{"content_type":"","value":"11:05:00.631 request:\n1 > POST http:\/\/127.0.0.1:51918\/files\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 6924\n1 > Content-Type: multipart\/form-data; boundary=uYLV661ZcfCbi6mMWVdxeodW8qZS6aZRu9D6xF\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:00.642 response time in milliseconds: 9.17\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Transfer-Encoding: chunked\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{\"id\":\"254f6505-5fa3-4982-9808-7d0567c99eb8\",\"filename\":\"upload-name.pdf\",\"message\":\"hello world\",\"contentType\":\"application\/pdf\"}","line":35}},{"name":"status 200","result":{"duration":4805,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":36},{"name":"match response == { id: '#uuid', filename: 'upload-name.pdf', message: 'hello world', contentType: 'application\/pdf' }","result":{"duration":321645,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":37},{"name":"def id = response.id","result":{"duration":9892138,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":38},{"name":"path 'files', id","result":{"duration":137553,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":40},{"name":"method get","result":{"duration":8595885,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":41,"doc_string":{"content_type":"","value":"11:05:00.655 request:\n2 > GET http:\/\/127.0.0.1:51918\/files\/254f6505-5fa3-4982-9808-7d0567c99eb8\n2 > Accept-Encoding: gzip,deflate\n2 > Connection: Keep-Alive\n2 > Host: 127.0.0.1:51918\n2 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:00.661 response time in milliseconds: 5.35\n2 < 200\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Content-Disposition: attachment; filename=\"upload-name.pdf\"\n2 < Content-Length: 6514\n2 < Content-Type: application\/pdf\n2 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n2 < Expires: 0\n2 < Pragma: no-cache\n2 < X-Content-Type-Options: nosniff\n2 < X-Frame-Options: DENY\n2 < X-XSS-Protection: 1; mode=block","line":41}},{"name":"status 200","result":{"duration":4091,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":42},{"name":"match responseBytes == read('test.pdf')","result":{"duration":9179526,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":43},{"name":"match header Content-Disposition contains 'attachment'","result":{"duration":222019,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":44},{"name":"match header Content-Disposition contains 'upload-name.pdf'","result":{"duration":2745473,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":45},{"name":"match header Content-Type == 'application\/pdf'","result":{"duration":3561308,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":46}],"tags":[{"name":"@mock-servlet-todo","line":30}]},{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url demoBaseUrl","result":{"duration":8480,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":4}]},{"line":48,"name":"upload with content created dynamically","description":"","id":"upload-with-content-created-dynamically","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'files'","result":{"duration":102511,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":49},{"name":"def value = 'lorem ipsum'","result":{"duration":2907042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":50},{"name":"multipart file myFile = { value: '#(value)', filename: 'hello.txt', contentType: 'text\/plain' }","result":{"duration":6545493,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":51},{"name":"multipart field message = 'hello world'","result":{"duration":3585659,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":52},{"name":"method post","result":{"duration":11789031,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":53,"doc_string":{"content_type":"","value":"11:05:01.080 request:\n1 > POST http:\/\/127.0.0.1:51918\/files\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 431\n1 > Content-Type: multipart\/form-data; boundary=7jnVzTATpus_RyBHy9TCfCtv5J56cyS4OBpIusa4\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:01.089 response time in milliseconds: 8.84\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Transfer-Encoding: chunked\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{\"id\":\"5eb45657-9da3-487d-86ba-60f45b3a3752\",\"filename\":\"hello.txt\",\"message\":\"hello world\",\"contentType\":\"text\/plain; charset=UTF-8\"}","line":53}},{"name":"status 200","result":{"duration":3849,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":54},{"name":"match response contains { id: '#uuid', filename: 'hello.txt', message: 'hello world' }","result":{"duration":277937,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":55},{"name":"def id = response.id","result":{"duration":16096869,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":56},{"name":"path 'files', id","result":{"duration":127124,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":58},{"name":"method get","result":{"duration":8830516,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":59,"doc_string":{"content_type":"","value":"11:05:01.108 request:\n2 > GET http:\/\/127.0.0.1:51918\/files\/5eb45657-9da3-487d-86ba-60f45b3a3752\n2 > Accept-Encoding: gzip,deflate\n2 > Connection: Keep-Alive\n2 > Host: 127.0.0.1:51918\n2 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:01.115 response time in milliseconds: 6.76\n2 < 200\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Content-Disposition: attachment; filename=\"hello.txt\"\n2 < Content-Length: 11\n2 < Content-Type: text\/plain;charset=UTF-8\n2 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n2 < Expires: 0\n2 < Pragma: no-cache\n2 < X-Content-Type-Options: nosniff\n2 < X-Frame-Options: DENY\n2 < X-XSS-Protection: 1; mode=block\nlorem ipsum","line":59}},{"name":"status 200","result":{"duration":4589,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":60},{"name":"match response == 'lorem ipsum'","result":{"duration":2173156,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":61},{"name":"match header Content-Disposition contains 'attachment'","result":{"duration":2360803,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":62},{"name":"match header Content-Disposition contains 'hello.txt'","result":{"duration":8022548,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":63},{"name":"match header Content-Type contains 'text\/plain'","result":{"duration":2935073,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":64}]},{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url demoBaseUrl","result":{"duration":8441,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":4}]},{"line":66,"name":"upload multipart\/mixed","description":"","id":"upload-multipart\/mixed","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'files', 'mixed'","result":{"duration":11505904,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":67},{"name":"multipart field myJson = { text: 'hello world' }","result":{"duration":117741,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":68},{"name":"multipart file myFile = { read: 'test.pdf', filename: 'upload-name.pdf', contentType: 'application\/pdf' }","result":{"duration":234495,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":69},{"name":"header Content-Type = 'multipart\/mixed'","result":{"duration":3859574,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":70},{"name":"method post","result":{"duration":50071108,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":71,"doc_string":{"content_type":"","value":"11:05:01.237 request:\n1 > POST http:\/\/127.0.0.1:51918\/files\/mixed\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 6919\n1 > Content-Type: multipart\/mixed; boundary=NLkwrQsU-5Da7YA8Rsgtgur5QjCvqBM\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:01.285 response time in milliseconds: 44.65\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Transfer-Encoding: chunked\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{\"id\":\"67acfa48-449a-4bb0-beaf-c8255967a0f8\",\"filename\":\"upload-name.pdf\",\"message\":\"hello world\",\"contentType\":\"application\/pdf\"}","line":71}},{"name":"status 200","result":{"duration":4382,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":72},{"name":"match response == { id: '#uuid', filename: 'upload-name.pdf', message: 'hello world', contentType: 'application\/pdf' }","result":{"duration":2464876,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":73}]},{"line":3,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"url demoBaseUrl","result":{"duration":11725,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":4}]},{"line":76,"name":"multipart upload has content-length header set","description":"","id":"multipart-upload-has-content-length-header-set","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'search', 'headers'","result":{"duration":5152681,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":77},{"name":"multipart field myFile = read('test.pdf')","result":{"duration":3447003,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":78},{"name":"multipart field message = 'hello world'","result":{"duration":5691456,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":79},{"name":"method post","result":{"duration":10480438,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":80,"doc_string":{"content_type":"","value":"11:05:01.508 request:\n1 > POST http:\/\/127.0.0.1:51918\/search\/headers\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 6900\n1 > Content-Type: multipart\/form-data; boundary=Ze8WgROu56D6sUHqaG70RKjZWbpvd0\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:01.516 response time in milliseconds: 8.01\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:05:01 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Transfer-Encoding: chunked\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{\"content-type\":[\"multipart\/form-data; boundary=Ze8WgROu56D6sUHqaG70RKjZWbpvd0\"],\"content-length\":[\"6900\"],\"host\":[\"127.0.0.1:51918\"],\"connection\":[\"Keep-Alive\"],\"user-agent\":[\"Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\"],\"accept-encoding\":[\"gzip,deflate\"]}","line":80}},{"name":"status 200","result":{"duration":4358,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":81},{"name":"match response['content-length'][0] == '#notnull'","result":{"duration":10120988,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":82},{"name":"path 'search', 'headers'","result":{"duration":319990,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":84},{"name":"multipart file myFile = { read: 'test.pdf', filename: 'upload-name.pdf', contentType: 'application\/pdf' }","result":{"duration":284685,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":85},{"name":"multipart field message = 'hello world'","result":{"duration":171659,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":86},{"name":"method post","result":{"duration":8734345,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":87,"doc_string":{"content_type":"","value":"11:05:01.529 request:\n2 > POST http:\/\/127.0.0.1:51918\/search\/headers\n2 > Accept-Encoding: gzip,deflate\n2 > Connection: Keep-Alive\n2 > Content-Length: 6930\n2 > Content-Type: multipart\/form-data; boundary=5J6Ga4MZbKqnVRIhf2br5WHy6N5L8zo7w_or7hNh\n2 > Host: 127.0.0.1:51918\n2 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:01.536 response time in milliseconds: 6.04\n2 < 200\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Content-Type: application\/json;charset=UTF-8\n2 < Date: Tue, 09 Apr 2019 14:05:01 GMT\n2 < Expires: 0\n2 < Pragma: no-cache\n2 < Transfer-Encoding: chunked\n2 < X-Content-Type-Options: nosniff\n2 < X-Frame-Options: DENY\n2 < X-XSS-Protection: 1; mode=block\n{\"content-type\":[\"multipart\/form-data; boundary=5J6Ga4MZbKqnVRIhf2br5WHy6N5L8zo7w_or7hNh\"],\"content-length\":[\"6930\"],\"host\":[\"127.0.0.1:51918\"],\"connection\":[\"Keep-Alive\"],\"user-agent\":[\"Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\"],\"accept-encoding\":[\"gzip,deflate\"]}","line":87}},{"name":"status 200","result":{"duration":4622,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":88},{"name":"match response['content-length'][0] == '#notnull'","result":{"duration":367393,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":89}],"tags":[{"name":"@mock-servlet-todo","line":75}]}],"name":"demo\/upload\/upload.feature","description":"file upload end-point","id":"file-upload-end-point","keyword":"Feature","uri":"demo\/upload\/upload.feature"}]