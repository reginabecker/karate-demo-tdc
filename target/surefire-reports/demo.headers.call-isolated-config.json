[{"line":1,"elements":[{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def setup = callonce read('common.feature')","result":{"duration":32666561,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9,"doc_string":{"content_type":"","value":"11:04:59.643 >> lock acquired, begin callonce: read('common.feature')\n11:04:59.672 << lock released, cached callonce: read('common.feature')","line":9}},{"name":"common.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":9},{"name":"url demoBaseUrl","result":{"duration":12916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":5},{"name":"path 'headers'","result":{"duration":108160,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":6},{"name":"method get","result":{"duration":6291310,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":7,"doc_string":{"content_type":"","value":"11:04:59.664 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:04:59.669 response time in milliseconds: 4.13\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Length: 36\n1 < Content-Type: text\/plain;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:04:59 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Set-Cookie: time=1554818699667\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\na259261b-2ff9-42e7-bcde-642069864110","line":7}},{"name":"status 200","result":{"duration":3949,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":8},{"name":"def time = responseCookies.time.value","result":{"duration":1154914,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":10},{"name":"def token = response","result":{"duration":11681,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":11},{"name":"configure headers = read('classpath:headers.js')","result":{"duration":1116994,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":16},{"name":"url demoBaseUrl","result":{"duration":12113,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":12,"name":"fail with a 400 since the header was not set","description":"","id":"fail-with-a-400-since-the-header-was-not-set","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'headers', setup.token","result":{"duration":364463,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":13},{"name":"param url = demoBaseUrl","result":{"duration":12777,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":14},{"name":"method get","result":{"duration":11005386,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":15,"doc_string":{"content_type":"","value":"11:04:59.676 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\/a259261b-2ff9-42e7-bcde-642069864110?url=http%3A%2F%2F127.0.0.1%3A51918\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:04:59.684 response time in milliseconds: 7.11\n1 < 400\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Connection: close\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:04:59 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Transfer-Encoding: chunked\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{\"timestamp\":1554818699681,\"status\":400,\"error\":\"Bad Request\",\"exception\":\"org.springframework.web.bind.ServletRequestBindingException\",\"message\":\"Missing cookie 'time' for method parameter of type String\",\"path\":\"\/headers\/a259261b-2ff9-42e7-bcde-642069864110\"}","line":15}},{"name":"status 400","result":{"duration":4722,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":17}]},{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def setup = callonce read('common.feature')","result":{"duration":24044,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"url demoBaseUrl","result":{"duration":7840,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":19,"name":"fail with a 400 since the cookie was not set","description":"","id":"fail-with-a-400-since-the-cookie-was-not-set","type":"scenario","keyword":"Scenario","steps":[{"name":"configure headers = { Authorization: '#(setup.token + setup.time + demoBaseUrl)' }","result":{"duration":51878396,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":20},{"name":"path 'headers', setup.token","result":{"duration":21872751,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":21},{"name":"param url = demoBaseUrl","result":{"duration":17660,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":22},{"name":"method get","result":{"duration":27566848,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":23,"doc_string":{"content_type":"","value":"11:04:59.901 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\/a259261b-2ff9-42e7-bcde-642069864110?url=http%3A%2F%2F127.0.0.1%3A51918\n1 > Accept-Encoding: gzip,deflate\n1 > Authorization: a259261b-2ff9-42e7-bcde-6420698641101554818699667http:\/\/127.0.0.1:51918\n1 > Connection: Keep-Alive\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:04:59.911 response time in milliseconds: 9.52\n1 < 400\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Connection: close\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:04:59 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Transfer-Encoding: chunked\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{\"timestamp\":1554818699906,\"status\":400,\"error\":\"Bad Request\",\"exception\":\"org.springframework.web.bind.ServletRequestBindingException\",\"message\":\"Missing cookie 'time' for method parameter of type String\",\"path\":\"\/headers\/a259261b-2ff9-42e7-bcde-642069864110\"}","line":23}},{"name":"status 400","result":{"duration":4238,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":24}]},{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def setup = callonce read('common.feature')","result":{"duration":19342,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"url demoBaseUrl","result":{"duration":7213,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":26,"name":"manually set header and cookie to pass","description":"","id":"manually-set-header-and-cookie-to-pass","type":"scenario","keyword":"Scenario","steps":[{"name":"headers { Authorization: '#(setup.token + setup.time + demoBaseUrl)' }","result":{"duration":4247471,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":27},{"name":"cookie time = setup.time","result":{"duration":4472192,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":28},{"name":"path 'headers', setup.token","result":{"duration":3514693,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":29},{"name":"param url = demoBaseUrl","result":{"duration":15548,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":30},{"name":"method get","result":{"duration":7819180,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":31,"doc_string":{"content_type":"","value":"11:05:00.772 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\/a259261b-2ff9-42e7-bcde-642069864110?url=http%3A%2F%2F127.0.0.1%3A51918\n1 > Accept-Encoding: gzip,deflate\n1 > Authorization: a259261b-2ff9-42e7-bcde-6420698641101554818699667http:\/\/127.0.0.1:51918\n1 > Connection: Keep-Alive\n1 > Cookie: time=1554818699667\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:00.777 response time in milliseconds: 4.61\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Length: 0\n1 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block","line":31}},{"name":"status 200","result":{"duration":3964,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":32}]},{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def setup = callonce read('common.feature')","result":{"duration":16030,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"url demoBaseUrl","result":{"duration":7077,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":34,"name":"alternative way of setting headers and cookies 1","description":"","id":"alternative-way-of-setting-headers-and-cookies-1","type":"scenario","keyword":"Scenario","steps":[{"name":"configure headers = { Authorization: '#(setup.token + setup.time + demoBaseUrl)' }","result":{"duration":1196533,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":35},{"name":"configure cookies = { time: '#(setup.time)' }","result":{"duration":10358879,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":36},{"name":"path 'headers', setup.token","result":{"duration":339267,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":37},{"name":"param url = demoBaseUrl","result":{"duration":13570,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":38},{"name":"method get","result":{"duration":8051553,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":39,"doc_string":{"content_type":"","value":"11:05:00.920 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\/a259261b-2ff9-42e7-bcde-642069864110?url=http%3A%2F%2F127.0.0.1%3A51918\n1 > Accept-Encoding: gzip,deflate\n1 > Authorization: a259261b-2ff9-42e7-bcde-6420698641101554818699667http:\/\/127.0.0.1:51918\n1 > Connection: Keep-Alive\n1 > Cookie: time=1554818699667\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:00.927 response time in milliseconds: 5.93\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Length: 0\n1 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block","line":39}},{"name":"status 200","result":{"duration":4556,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":40}]},{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"def setup = callonce read('common.feature')","result":{"duration":73607,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"url demoBaseUrl","result":{"duration":7481,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":42,"name":"alternative way of setting headers and cookies 2","description":"","id":"alternative-way-of-setting-headers-and-cookies-2","type":"scenario","keyword":"Scenario","steps":[{"name":"header Authorization = (setup.token + setup.time + demoBaseUrl)","result":{"duration":3068377,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":43},{"name":"cookies { time: '#(setup.time)' }","result":{"duration":565128,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":44},{"name":"path 'headers', setup.token","result":{"duration":350339,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":45},{"name":"param url = demoBaseUrl","result":{"duration":13490,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":46},{"name":"method get","result":{"duration":7937038,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":47,"doc_string":{"content_type":"","value":"11:05:01.046 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\/a259261b-2ff9-42e7-bcde-642069864110?url=http%3A%2F%2F127.0.0.1%3A51918\n1 > Accept-Encoding: gzip,deflate\n1 > Authorization: a259261b-2ff9-42e7-bcde-6420698641101554818699667http:\/\/127.0.0.1:51918\n1 > Connection: Keep-Alive\n1 > Cookie: time=1554818699667\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:05:01.052 response time in milliseconds: 4.88\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Length: 0\n1 < Date: Tue, 09 Apr 2019 14:05:00 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block","line":47}},{"name":"status 200","result":{"duration":3656,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":48}]}],"name":"demo\/headers\/call-isolated-config.feature","description":"a called feature will not clobber the parent context\nif the variable assignment syntax is used","id":"a-called-feature-will-not-clobber-the-parent-context","keyword":"Feature","uri":"demo\/headers\/call-isolated-config.feature"}]