<testsuite failures="0" name="demo/upload/upload-image.feature" skipped="0" tests="3" time="0.136803">
  <testcase classname="demo.upload.upload-image" name="upload image - multipart" time="0.04941">
    <system-out>* url demoBaseUrl ......................................................... passed
Given path 'files' ........................................................ passed
And multipart file myFile = { read: 'karate-logo.jpg', filename: 'karate-logo.jpg', contentType: 'image/jpg' } . passed
And multipart field message = 'image test' ................................ passed
When method post .......................................................... passed
Then status 200 ........................................................... passed
And match response == { id: '#uuid', filename: 'karate-logo.jpg', message: 'image test', contentType: 'image/jpg' } . passed
And def id = response.id .................................................. passed
Given path 'files', id .................................................... passed
When method get ........................................................... passed
Then status 200 ........................................................... passed
And match response == read('karate-logo.jpg') ............................. passed
And match header Content-Disposition contains 'attachment' ................ passed
And match header Content-Disposition contains 'karate-logo.jpg' ........... passed
And match header Content-Type == 'image/jpg' .............................. passed</system-out>
  </testcase>
  <testcase classname="demo.upload.upload-image" name="upload image - binary request body" time="0.078946">
    <system-out>* url demoBaseUrl ......................................................... passed
Given path 'files' ........................................................ passed
And multipart file myFile = { read: 'karate-logo.jpg', filename: 'karate-logo.jpg', contentType: 'image/jpg' } . passed
And multipart field message = 'image test' ................................ passed
When method post .......................................................... passed
Then status 200 ........................................................... passed
And match response == { id: '#uuid', filename: 'karate-logo.jpg', message: 'image test', contentType: 'image/jpg' } . passed
And def id = response.id .................................................. passed
Given path 'files', id .................................................... passed
When method get ........................................................... passed
Then status 200 ........................................................... passed
And match response == read('karate-logo.jpg') ............................. passed
And match header Content-Disposition contains 'attachment' ................ passed
And match header Content-Disposition contains 'karate-logo.jpg' ........... passed
And match header Content-Type == 'image/jpg' .............................. passed
* url demoBaseUrl ......................................................... passed
Given path 'files', 'binary' .............................................. passed
And param name = 'karate-logo.jpg' ........................................ passed
And request read('karate-logo.jpg') ....................................... passed
When method post .......................................................... passed
Then status 200 ........................................................... passed
And match response contains { id: '#uuid' } ............................... passed
And def id = response.id .................................................. passed
Given path 'files', id .................................................... passed
When method get ........................................................... passed
Then status 200 ........................................................... passed
And match responseBytes == read('karate-logo.jpg') ........................ passed
And match header Content-Disposition contains 'karate-logo.jpg' ........... passed</system-out>
  </testcase>
  <testcase classname="demo.upload.upload-image" name="upload stream - content-length should be sent correctly" time="0.008447">
    <system-out>* url demoBaseUrl ......................................................... passed
Given path 'files' ........................................................ passed
And multipart file myFile = { read: 'karate-logo.jpg', filename: 'karate-logo.jpg', contentType: 'image/jpg' } . passed
And multipart field message = 'image test' ................................ passed
When method post .......................................................... passed
Then status 200 ........................................................... passed
And match response == { id: '#uuid', filename: 'karate-logo.jpg', message: 'image test', contentType: 'image/jpg' } . passed
And def id = response.id .................................................. passed
Given path 'files', id .................................................... passed
When method get ........................................................... passed
Then status 200 ........................................................... passed
And match response == read('karate-logo.jpg') ............................. passed
And match header Content-Disposition contains 'attachment' ................ passed
And match header Content-Disposition contains 'karate-logo.jpg' ........... passed
And match header Content-Type == 'image/jpg' .............................. passed
* url demoBaseUrl ......................................................... passed
Given path 'files', 'binary' .............................................. passed
And param name = 'karate-logo.jpg' ........................................ passed
And request read('karate-logo.jpg') ....................................... passed
When method post .......................................................... passed
Then status 200 ........................................................... passed
And match response contains { id: '#uuid' } ............................... passed
And def id = response.id .................................................. passed
Given path 'files', id .................................................... passed
When method get ........................................................... passed
Then status 200 ........................................................... passed
And match responseBytes == read('karate-logo.jpg') ........................ passed
And match header Content-Disposition contains 'karate-logo.jpg' ........... passed
* url demoBaseUrl ......................................................... passed
Given path 'search', 'headers' ............................................ passed
And param name = 'karate-logo.jpg' ........................................ passed
And request read('karate-logo.jpg') ....................................... passed
When method post .......................................................... passed
Then status 200 ........................................................... passed
And match response['content-length'][0] == '13575' ........................ passed</system-out>
  </testcase>
</testsuite>
