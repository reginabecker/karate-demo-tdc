[{"line":1,"elements":[{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"callonce read('common.feature')","result":{"duration":48974372,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9,"doc_string":{"content_type":"","value":"11:04:58.213 >> lock acquired, begin callonce: read('common.feature')\n11:04:58.260 << lock released, cached callonce: read('common.feature')","line":9}},{"name":"common.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":9},{"name":"url demoBaseUrl","result":{"duration":13276,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":5},{"name":"path 'headers'","result":{"duration":3084997,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> And","line":6},{"name":"method get","result":{"duration":8105387,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":7,"doc_string":{"content_type":"","value":"11:04:58.248 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:04:58.253 response time in milliseconds: 4.34\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Length: 36\n1 < Content-Type: text\/plain;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:04:58 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Set-Cookie: time=1554818698251\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n6c69cc53-20d8-4f08-a32e-b0ff3155a4f6","line":7}},{"name":"status 200","result":{"duration":4841,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":8},{"name":"def time = responseCookies.time.value","result":{"duration":4797806,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":10},{"name":"def token = response","result":{"duration":15579,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":11},{"name":"configure headers = read('classpath:headers.js')","result":{"duration":1462595,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":16},{"name":"url demoBaseUrl","result":{"duration":15186,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":15,"name":"no extra config - they have been set automatically by 'common.feature'","description":"","id":"no-extra-config---they-have-been-set-automatically-by-'common.feature'","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'headers', token","result":{"duration":1343513,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":16},{"name":"param url = demoBaseUrl","result":{"duration":23338,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":17},{"name":"method get","result":{"duration":22664728,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":18,"doc_string":{"content_type":"","value":"11:04:58.271 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\/6c69cc53-20d8-4f08-a32e-b0ff3155a4f6?url=http%3A%2F%2F127.0.0.1%3A51918\n1 > Accept-Encoding: gzip,deflate\n1 > Authorization: 6c69cc53-20d8-4f08-a32e-b0ff3155a4f61554818698251http:\/\/127.0.0.1:51918\n1 > Connection: Keep-Alive\n1 > Cookie: time=1554818698251\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n1 > request_id: 1f43efa0-1842-45cf-8556-f5e38ae33ee3\n\n11:04:58.285 response time in milliseconds: 11.58\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Length: 0\n1 < Date: Tue, 09 Apr 2019 14:04:58 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block","line":18}},{"name":"status 200","result":{"duration":3847,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":19}]},{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"callonce read('common.feature')","result":{"duration":31933476,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9,"doc_string":{"content_type":"","value":"11:04:58.261 this thread waited 30 milliseconds for callonce lock: read('common.feature')","line":9}},{"name":"url demoBaseUrl","result":{"duration":8717,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":21,"name":"make sure that the second scenario works as well with callonce","description":"","id":"make-sure-that-the-second-scenario-works-as-well-with-callonce","type":"scenario","keyword":"Scenario","steps":[{"name":"path 'headers', token","result":{"duration":153652,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":22},{"name":"param url = demoBaseUrl","result":{"duration":16461,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":23},{"name":"method get","result":{"duration":23220264,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":24,"doc_string":{"content_type":"","value":"11:04:58.272 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\/6c69cc53-20d8-4f08-a32e-b0ff3155a4f6?url=http%3A%2F%2F127.0.0.1%3A51918\n1 > Accept-Encoding: gzip,deflate\n1 > Authorization: 6c69cc53-20d8-4f08-a32e-b0ff3155a4f61554818698251http:\/\/127.0.0.1:51918\n1 > Connection: Keep-Alive\n1 > Cookie: time=1554818698251\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n1 > request_id: 56f7da84-ffea-43d6-8881-f1eca1c23c4f\n\n11:04:58.286 response time in milliseconds: 13.38\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Length: 0\n1 < Date: Tue, 09 Apr 2019 14:04:58 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block","line":24}},{"name":"status 200","result":{"duration":4726,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":25}]},{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"callonce read('common.feature')","result":{"duration":499612,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"url demoBaseUrl","result":{"duration":8877,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10}]},{"line":27,"name":"here we erase the configured headers to get a 400","description":"","id":"here-we-erase-the-configured-headers-to-get-a-400","type":"scenario","keyword":"Scenario","steps":[{"name":"configure headers = null","result":{"duration":103226,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":28},{"name":"path 'headers', token","result":{"duration":86158,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":29},{"name":"param url = demoBaseUrl","result":{"duration":13937,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":30},{"name":"method get","result":{"duration":34994858,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":31,"doc_string":{"content_type":"","value":"11:04:58.428 request:\n1 > GET http:\/\/127.0.0.1:51918\/headers\/6c69cc53-20d8-4f08-a32e-b0ff3155a4f6?url=http%3A%2F%2F127.0.0.1%3A51918\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Cookie: time=1554818698251\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n\n11:04:58.457 response time in milliseconds: 25.79\n1 < 400\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Connection: close\n1 < Content-Type: application\/json;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:04:58 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < Transfer-Encoding: chunked\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{\"timestamp\":1554818698445,\"status\":400,\"error\":\"Bad Request\",\"exception\":\"org.springframework.web.bind.ServletRequestBindingException\",\"message\":\"Missing request header 'Authorization' for method parameter of type String[]\",\"path\":\"\/headers\/6c69cc53-20d8-4f08-a32e-b0ff3155a4f6\"}","line":31}},{"name":"status 400","result":{"duration":5817,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":32}]}],"name":"demo\/headers\/call-updates-config.feature","description":"a called feature can 'contribute' to variables and config\nincluding headers and cookies","id":"a-called-feature-can-'contribute'-to-variables-and-config","keyword":"Feature","uri":"demo\/headers\/call-updates-config.feature"}]