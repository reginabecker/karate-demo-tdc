[{"line":2,"elements":[{"line":4,"name":"only listening to websocket messages","description":"","id":"only-listening-to-websocket-messages","type":"scenario","keyword":"Scenario","steps":[{"name":"def handler = function(msg){ if (msg.startsWith('{')) karate.signal(msg) }","result":{"duration":3383158,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":5},{"name":"eval karate.webSocket(demoBaseUrl + '\/websocket', handler)","result":{"duration":1055202451,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":6},{"name":"url demoBaseUrl","result":{"duration":11729,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":10},{"name":"path 'websocket-controller'","result":{"duration":5158355,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":11},{"name":"request { text: 'Rudy' }","result":{"duration":73441,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":12},{"name":"method post","result":{"duration":1019182978,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":13,"doc_string":{"content_type":"","value":"11:05:01.633 request:\n1 > POST http:\/\/127.0.0.1:51918\/websocket-controller\n1 > Accept-Encoding: gzip,deflate\n1 > Connection: Keep-Alive\n1 > Content-Length: 15\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: 127.0.0.1:51918\n1 > User-Agent: Apache-HttpClient\/4.5.5 (Java\/1.8.0_181)\n{\"text\":\"Rudy\"}\n\n11:05:02.651 response time in milliseconds: 1016.92\n1 < 200\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Content-Length: 23\n1 < Content-Type: text\/plain;charset=UTF-8\n1 < Date: Tue, 09 Apr 2019 14:05:02 GMT\n1 < Expires: 0\n1 < Pragma: no-cache\n1 < X-Content-Type-Options: nosniff\n1 < X-Frame-Options: DENY\n1 < X-XSS-Protection: 1; mode=block\n{ \"id\": 1554818701641 }","line":13}},{"name":"status 200","result":{"duration":5591,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":14},{"name":"def id = response.id","result":{"duration":4283779,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":15},{"name":"def result = karate.listen(5000)","result":{"duration":3892878,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":18},{"name":"match result == { id: '#(id)', content: 'hello Rudy !' }","result":{"duration":2859112,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":19}]},{"line":21,"name":"using the websocket instance to send as well as receive messages","description":"","id":"using-the-websocket-instance-to-send-as-well-as-receive-messages","type":"scenario","keyword":"Scenario","steps":[{"name":"def handler = function(msg){ if (msg.startsWith('hello')) karate.signal(msg) }","result":{"duration":9126689,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":22},{"name":"def socket = karate.webSocket(demoBaseUrl + '\/websocket', handler)","result":{"duration":819928516,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":23},{"name":"eval socket.send('Billie')","result":{"duration":9015069,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":24},{"name":"def result = karate.listen(5000)","result":{"duration":1092568766,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":25},{"name":"match result == 'hello Billie !'","result":{"duration":2878133,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":26}]}],"name":"demo\/websocket\/websocket.feature","description":"websocket testing","id":"websocket-testing","keyword":"Feature","uri":"demo\/websocket\/websocket.feature","tags":[{"name":"@mock-servlet-todo","line":1}]}]